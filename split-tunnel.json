# –£–ª—å—Ç–∏–º–∞—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ —Å –∫—É—á–µ–π —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ (–ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã, YouTube, Discord, Telegram, Cloudflare)
# –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –†–æ—Å—Å–∏–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤—ã–±–æ—Ä–æ–º –ø—Ä–æ–∫—Å–∏ –∏ –æ–±—Ö–æ–¥–æ–º –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.
# –í–∫–ª—é—á–∞–µ—Ç:
#   - –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (YouTube, Discord, Telegram, Cloudflare)
#   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ –ø–æ –ø—Ä–æ–∫—Å–∏-–≥—Ä—É–ø–ø–∞–º
#   - –ò–≥—Ä—ã –∏ —Ç–æ—Ä—Ä–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ DIRECT
#   - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–∫–ª–∞–º—ã –∏ –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–∞–π—Ç–æ–≤
#   - –ü–æ–¥–¥–µ—Ä–∂–∫—É IPv4, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–∫–ª—é—á–µ–Ω–∏—è IPv6
# –ö–æ–Ω—Ñ–∏–≥ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–∏–º–µ—Ä–∞, —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã.
# –ê–≤—Ç–æ—Ä: RED x Devoyan
# –ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Å–ø–∏—Å–∫–æ–≤ –∏ –ø—Ä–∞–≤–∏–ª:
#   - Legiz
#   - PentiumB
#   - itdog
# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Mihomo: https://wiki.metacubex.one/ru/config/
# ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é, –≤–æ–∑–º–æ–∂–Ω—ã –æ—à–∏–±–∫–∏ –∏–ª–∏ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –ø—Ä–∞–≤–∏–ª

mixed-port: 7890
allow-lan: true
lan-allowed-ips: # –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ ip –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ lan
  - 0.0.0.0/8
  - 10.0.0.0/8
  - 100.64.0.0/10
  - 127.0.0.0/8
  - 169.254.0.0/16
  - 172.16.0.0/12
  - 192.0.0.0/24
  - 192.0.2.0/24
  - 192.88.99.0/24
  - 192.168.0.0/16
  - 198.18.0.0/15
  - 198.51.100.0/24
  - 203.0.113.0/24
  - 224.0.0.0/3
  - ::/127
  - fc00::/7
  - fe80::/10
  - ff00::/8
tcp-concurrent: true
enable-process: true
find-process-mode: always
mode: rule
log-level: info
ipv6: false # true - –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ipv6
bind-address: "*"
keep-alive-interval: 30
unified-delay: false

profile:
  store-selected: true
  store-fake-ip: true

sniffer:
  enable: true
  force-dns-mapping: true
  parse-pure-ip: true
  override-destination: false
  sniff:
    HTTP:
      ports: 
        - 80
        - 8080-8880
      override-destination: true
    TLS:
      ports:
        - 443
        - 8443
    # –î–ª—è VLESS REALITY –Ω–µ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª–∞, —Ç–∞–∫ –∫–∞–∫ –≤—Å—ë —Ä–∞–≤–Ω–æ –¥–µ–ª–∞–µ–º REJECT –≤ rules. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ, –∏—Å–ø–æ–ª—å–∑—É–µ–º.
    #QUIC:
    #  ports:
    #    - 443
    
  skip-dst-address: # –ü—Ä–æ–ø—É—Å–∫ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –¥–ª—è —Ü–µ–ª–µ–≤—ã—Ö IP
    - 0.0.0.0/8
    - 10.0.0.0/8
    - 100.64.0.0/10
    - 127.0.0.0/8
    - 169.254.0.0/16
    - 172.16.0.0/12
    - 192.0.0.0/24
    - 192.0.2.0/24
    - 192.88.99.0/24
    - 192.168.0.0/16
    - 198.18.0.0/15
    - 198.51.100.0/24
    - 203.0.113.0/24
    - 224.0.0.0/3
    - ::/127
    - fc00::/7
    - fe80::/10
    - ff00::/8

tun:
  enable: true
  stack: gvisor
  auto-route: true
  auto-detect-interface: true
  dns-hijack:
    - any:53
    - tcp://any:53
  strict-route: true
  route-exclude-address:
    - 127.0.0.0/8
    - ::1/128

dns:
  enable: true
  prefer-h3: false
  use-hosts: true
  use-system-hosts: true
  ipv6: false #true - –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —Ä–µ–∑–æ–ª–≤–∏—Ç—å –≤ ipv6
  enhanced-mode: redir-host
  # ----
  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –≤—ã–±–∏—Ä–∞–µ–º DNS —Å–µ—Ä–≤–µ—Ä–∞. –ù–∞ –≤–∞—à –≤—ã–±–æ—Ä —Å –±–æ–ª—å—à–∏–º –∑–∞–ø–∞—Å–æ–º, –Ω–∞ —Å–ª—É—á–∞–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
  default-nameserver:
    # DNS –¥–ª—è –¥–æ–º–µ–Ω–æ–≤ DNS —Å–µ—Ä–≤–µ—Ä–æ–≤
    - tls://1.1.1.1#üé≤ –õ—é–±–æ–π –¥–æ—Å—Ç—É–ø–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
    - https://94.140.14.14/dns-query#DIRECT
    - https://8.8.8.8/dns-query#DIRECT
    #- https://9.9.9.9/dns-query#DIRECT
    #- https://1.1.1.1/dns-query#DIRECT
    #- https://1.0.0.1/dns-query#DIRECT
    #- https://208.67.222.222/dns-query#DIRECT
    #- https://208.67.220.220/dns-query#DIRECT
    #- https://77.88.8.8/dns-query#DIRECT
  proxy-server-nameserver:
    # DNS –¥–ª—è –¥–æ–º–µ–Ω–æ–≤ –ø—Ä–æ–∫—Å–∏ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ proxies
    - tls://1.1.1.1#üé≤ –õ—é–±–æ–π –¥–æ—Å—Ç—É–ø–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
    - https://94.140.14.14/dns-query#DIRECT
    - https://8.8.8.8/dns-query#DIRECT
    #- https://8.8.4.4/dns-query#DIRECT
    #- https://208.67.222.222/dns-query#DIRECT
    #- https://208.67.220.220/dns-query#DIRECT
    #- https://9.9.9.9/dns-query#DIRECT
    #- https://1.1.1.1/dns-query#DIRECT
    #- https://1.0.0.1/dns-query#DIRECT
    #- https://dns.opendns.com/dns-query#DIRECT
    #- https://doh.sb/dns-query#DIRECT
    #- https://doh.mullvad.net/dns-query#DIRECT
    #- https://dns.nextdns.io/dns-query#DIRECT
    #- https://doh.libredns.gr/dns-query#DIRECT
    #- https://cloudflare-dns.com/dns-query#DIRECT
  direct-nameserver:
    # DNS –¥–ª—è —Å–∞–π—Ç–æ–≤ –∏–¥—É—â–∏—Ö —á–µ—Ä–µ–∑ DIRECT
    - 77.88.8.8#DIRECT # Yandex DNS
    - 77.88.8.1#DIRECT # Yandex DNS
    - 8.8.8.8#DIRECT # Google DNS
  nameserver:
    # –°–µ—Ä–≤–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–æ–º–µ–Ω–æ–≤, –∏–¥—É—â–∏—Ö —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
    - tls://94.140.14.14#üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã
    - tls://94.140.14.14#üé≤ –õ—é–±–æ–π –¥–æ—Å—Ç—É–ø–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
    - tls://94.140.15.15#üé≤ –õ—é–±–æ–π –¥–æ—Å—Ç—É–ø–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
    
proxies:

proxy-groups:
  - name: üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã
    icon: https://raw.githubusercontent.com/remnawave/templates/refs/heads/main/icons/Blocked.png
    type: select
    include-all: true
    proxies:
      - üé≤ –õ—é–±–æ–π –¥–æ—Å—Ç—É–ø–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
      - üá∑üá∫ –ë–µ–∑ VPN # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

  - name: ‚ñ∂Ô∏è YouTube
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/YouTube.png
    type: select
    include-all: true
    proxies:
      - üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã

  - name: üí¨ Discord
    icon: https://raw.githubusercontent.com/remnawave/templates/refs/heads/main/icons/Discord.png
    type: select
    include-all: true
    proxies:
      - üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã

  - name: ‚û§ Telegram
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Telegram.png
    type: select
    include-all: true
    proxies:
      - üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã
      - üá∑üá∫ –ë–µ–∑ VPN

  - name: üü† Cloudflare
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Cloudflare.png
    type: select
    include-all: true
    proxies:
      - üá∑üá∫ –ë–µ–∑ VPN
      - üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã

  - name: ‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Russia.png
    type: select
    proxies:
      - üá∑üá∫ –ë–µ–∑ VPN

  - name: üåç –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∞–π—Ç—ã
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Global.png
    type: select
    include-all: true
    proxies:
      - üá∑üá∫ –ë–µ–∑ VPN
      - üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã

  - name: PROXY
    type: select
    include-all: true
    hidden: true
    proxies:
      - üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã

  - name: üé≤ –õ—é–±–æ–π –¥–æ—Å—Ç—É–ø–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
    type: fallback
    include-all: true
    url: "https://www.gstatic.com/generate_204"
    interval: 300
    hidden: true
    lazy: true

  - name: üá∑üá∫ –ë–µ–∑ VPN
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Blackhole.png
    type: select
    hidden: true
    proxies:
      - DIRECT

  - name: üéÆ –ò–≥—Ä—ã
    icon: https://cdn-icons-png.flaticon.com/512/633/633600.png
    type: select
    include-all: true
    proxies:
      - üá∑üá∫ –ë–µ–∑ VPN

  - name: üîó –¢–æ—Ä—Ä–µ–Ω—Ç—ã
    icon: https://cdn-icons-png.flaticon.com/512/888/888879.png
    type: select
    include-all: true
    proxies:
        - üá∑üá∫ –ë–µ–∑ VPN  # –≤—Å—ë –∏–¥—ë—Ç –Ω–∞–ø—Ä—è–º—É—é

rule-providers:
  ru-inline-banned:
    type: inline
    payload:
      - DOMAIN-SUFFIX,habr.com
      - DOMAIN-SUFFIX,seasonvar.ru
      - DOMAIN-SUFFIX,lib.social
      - DOMAIN-SUFFIX,kemono.su
      - DOMAIN-SUFFIX,jut.su
      - DOMAIN-SUFFIX,kara.su
      - DOMAIN-SUFFIX,theins.ru
      - DOMAIN-SUFFIX,tvrain.ru
      - DOMAIN-SUFFIX,echo.msk.ru
      - DOMAIN-SUFFIX,the-village.ru
      - DOMAIN-SUFFIX,snob.ru
      - DOMAIN-SUFFIX,novayagazeta.ru
      - DOMAIN-SUFFIX,moscowtimes.ru
      - DOMAIN-SUFFIX,natribu.org
      - DOMAIN-KEYWORD,animego
      - DOMAIN-KEYWORD,yummyanime
      - DOMAIN-KEYWORD,yummy-anime
      - DOMAIN-KEYWORD,animeportal
      - DOMAIN-KEYWORD,anime-portal
      - DOMAIN-KEYWORD,animedub
      - DOMAIN-KEYWORD,anidub
      - DOMAIN-KEYWORD,animelib
      - DOMAIN-KEYWORD,ikianime
      - DOMAIN-KEYWORD,anilibria
    behavior: classical
  ru-inline:
    type: inline
    payload:
      - DOMAIN-SUFFIX,2ip.ru
      - DOMAIN-SUFFIX,yastatic.net
      - DOMAIN-SUFFIX,yandex.net
      - DOMAIN-SUFFIX,yandex.kz
      - DOMAIN-SUFFIX,yandex.com
      - DOMAIN-SUFFIX,yadi.sk
      - DOMAIN-SUFFIX,mycdn.me
      - DOMAIN-SUFFIX,jivosite.com
      - DOMAIN-SUFFIX,vk.com
      - DOMAIN-SUFFIX,avira.com
      - DOMAIN-SUFFIX,.ru
      - DOMAIN-SUFFIX,.su
      - DOMAIN-SUFFIX,.by
      - DOMAIN-SUFFIX,.ru.com
      - DOMAIN-SUFFIX,.ru.net
      - DOMAIN-SUFFIX,kudago.com
      - DOMAIN-SUFFIX,kinescope.io
      - DOMAIN-SUFFIX,redheadsound.studio
      - DOMAIN-SUFFIX,plplayer.online
      - DOMAIN-SUFFIX,lomont.site
      - DOMAIN-SUFFIX,remanga.org
      - DOMAIN-SUFFIX,shopstory.live
      - DOMAIN-KEYWORD,avito
      - DOMAIN-KEYWORD,miradres
      - DOMAIN-KEYWORD,premier
      - DOMAIN-KEYWORD,shutterstock
      - DOMAIN-KEYWORD,2gis
      - DOMAIN-KEYWORD,diginetica
      - DOMAIN-KEYWORD,kinescopecdn
      - DOMAIN-KEYWORD,researchgate
      - DOMAIN-KEYWORD,springer
      - DOMAIN-KEYWORD,nextcloud
      - DOMAIN-KEYWORD,kaspersky
      - DOMAIN-KEYWORD,stepik
      - DOMAIN-KEYWORD,likee
      - DOMAIN-KEYWORD,snapchat
      - DOMAIN-KEYWORD,yappy
      - DOMAIN-KEYWORD,pikabu
      - DOMAIN-KEYWORD,okko
      - DOMAIN-KEYWORD,wink
      - DOMAIN-KEYWORD,kion
      - DOMAIN-KEYWORD,roblox
      - DOMAIN-KEYWORD,ozon
      - DOMAIN-KEYWORD,wildberries
      - DOMAIN-KEYWORD,aliexpress
    behavior: classical
  geosite-ru:
    type: http
    behavior: domain
    format: mrs
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/category-ru.mrs
    path: ./rule-sets/geosite-ru.mrs
    interval: 86400
  yandex:
    type: http
    behavior: domain
    format: yaml
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/yandex.yaml
    path: ./rule-sets/yandex.yaml
    interval: 86400
  ai:
    type: http
    behavior: domain
    format: mrs
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/category-ai-!cn.mrs
    path: ./rule-sets/ai.mrs
    interval: 86400
  mailru:
    type: http
    behavior: domain
    format: mrs
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/mailru.mrs
    path: ./rule-sets/mailru.mrs
  category-porn:
    type: http
    behavior: domain
    format: mrs
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/category-porn.mrs
    path: ./rule-sets/category-porn.mrs
    interval: 86400
  drweb:
    type: http
    behavior: domain
    format: mrs
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/drweb.mrs
    path: ./rule-sets/drweb.mrs
    interval: 86400
  geoip-ru:
    type: http
    behavior: ipcidr
    format: mrs
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geoip/ru.mrs
    path: ./rule-sets/geoip-ru.mrs
    interval: 86400
  geoip-by:
    type: http
    behavior: ipcidr
    format: mrs
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geoip/by.mrs
    path: ./rule-sets/geoip-by.mrs
    interval: 86400
  geosite-private:
    type: http
    behavior: domain
    format: mrs
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/private.mrs
    path: ./rule-sets/geosite-private.mrs
    interval: 86400
  geoip-private:
    type: http
    behavior: ipcidr
    format: mrs
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geoip/private.mrs
    path: ./rule-sets/geoip-private.mrs
    interval: 86400
  discord_domains:
    type: http
    behavior: domain
    format: mrs
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/discord.mrs
    path: ./rule-sets/discord_domains.mrs
    interval: 86400
  speedtest-net:
    type: http
    behavior: domain
    format: mrs
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/speedtest.mrs
    path: ./rule-sets/speedtest-net.mrs
    interval: 86400
  remote-control:
    type: http
    behavior: domain
    format: mrs
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/category-remote-control.mrs
    path: ./rule-sets/remote-control.mrs
    interval: 86400
  inline-blocked-ips:
    type: inline
    payload:
      - IP-CIDR,172.232.25.131/32 #IP –¥–ª—è —á–∞—Ç–∞ Warframe
    behavior: classical
  discord_voiceips:
    type: http
    behavior: ipcidr
    format: mrs
    url: https://github.com/legiz-ru/mihomo-rule-sets/raw/main/other/discord-voice-ip-list.mrs
    path: ./rule-sets/discord_voiceips.mrs
    interval: 86400
  discord_vc:
    type: inline
    payload:
      - AND,((IP-CIDR,138.128.136.0/21),(NETWORK,udp),(DST-PORT,50000-50100))
      - AND,((IP-CIDR,162.158.0.0/15),(NETWORK,udp),(DST-PORT,50000-50100))
      - AND,((IP-CIDR,172.64.0.0/13),(NETWORK,udp),(DST-PORT,50000-50100))
      - AND,((IP-CIDR,34.0.0.0/15),(NETWORK,udp),(DST-PORT,50000-50100))
      - AND,((IP-CIDR,34.2.0.0/15),(NETWORK,udp),(DST-PORT,50000-50100))
      - AND,((IP-CIDR,35.192.0.0/12),(NETWORK,udp),(DST-PORT,50000-50100))
      - AND,((IP-CIDR,35.208.0.0/12),(NETWORK,udp),(DST-PORT,50000-50100))
      - AND,((IP-CIDR,5.200.14.128/25),(NETWORK,udp),(DST-PORT,50000-50100))
      - AND,((IP-CIDR,66.22.192.0/18),(NETWORK,udp),(DST-PORT,50000-50100))
    behavior: classical
  refilter_domains:
    type: http
    behavior: domain
    format: mrs
    url: https://github.com/legiz-ru/mihomo-rule-sets/raw/main/re-filter/domain-rule.mrs
    path: ./rule-sets/refilter.mrs
    interval: 86400
  youtube:
    type: http
    behavior: domain
    format: mrs
    interval: 86400
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/youtube.mrs
    path: ./rule-sets/youtube.mrs
  google-deepmind:
    type: http
    behavior: domain
    format: mrs
    interval: 86400
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/google-gemini.mrs
    path: ./rule-sets/gooogle-deepmind.mrs
  telegram-ips:
    type: http
    behavior: ipcidr
    format: mrs
    interval: 86400
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geoip/telegram.mrs
    path: ./rule-sets/telegram-ips.mrs
  telegram-domains:
    type: http
    behavior: domain
    format: mrs
    interval: 86400
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/telegram.mrs
    path: ./rule-sets/telegram-domains.mrs
  oisd_big:
    type: http
    behavior: domain
    format: mrs
    url: https://github.com/legiz-ru/mihomo-rule-sets/raw/main/oisd/big.mrs
    path: ./rule-sets/oisd_big.mrs
    interval: 86400
  torrent-trackers:
    type: http
    behavior: domain
    format: mrs
    url: https://github.com/legiz-ru/mihomo-rule-sets/raw/main/other/torrent-trackers.mrs
    path: ./rule-sets/torrent-trackers.mrs
    interval: 86400
  torrent-clients:
    type: http
    behavior: classical
    format: yaml
    url: https://github.com/legiz-ru/mihomo-rule-sets/raw/main/other/torrent-clients.yaml
    path: ./rule-sets/torrent-clients.yaml
    interval: 86400
  ru-apps:
    type: http
    behavior: classical
    format: yaml
    url: https://github.com/legiz-ru/mihomo-rule-sets/blob/main/other/ru-app-list.yaml
    path: ./rule-sets/ru-apps.yaml
    interval: 86400
  ru-inside:
    type: http
    behavior: classical
    format: text
    url: https://raw.githubusercontent.com/itdoginfo/allow-domains/main/Russia/inside-clashx.lst
    path: ./rule-sets/ru-inside.lst
    interval: 86400
  ru-outside:
    type: http
    behavior: classical
    format: text
    url: https://raw.githubusercontent.com/itdoginfo/allow-domains/refs/heads/main/Russia/outside-clashx.lst
    path: ./rule-sets/ru-outside.lst
    interval: 86400
  cloudflare-ips:
    type: http
    behavior: ipcidr
    format: mrs
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/cloudflare.mrs
    path: ./rule-sets/cloudflare-ips.mrs
    interval: 86400
  cloudflare-domains:
    type: http
    behavior: domain
    format: mrs
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/cloudflare.mrs
    path: ./rule-sets/cloudflare-domains.mrs
    interval: 86400
  cloudflare-PentiumB:
    type: http
    behavior: ipcidr
    format: text
    url: https://raw.githubusercontent.com/PentiumB/CDN-RuleSet/refs/heads/main/source/cloudflare.lst
    path: ./rule-sets/cloudflare-PentiumB.lst
    interval: 86400
  quic:
    type: inline
    behavior: classical
    payload:
      - AND,((NETWORK,udp),(DST-PORT,443))

rules:
  # –õ–æ–∫–∞–ª—å–Ω—É—é —Å–µ—Ç—å –≤ –¥–∏—Ä–µ–∫—Ç
  - RULE-SET,geoip-private,DIRECT,no-resolve
  - RULE-SET,geosite-private,DIRECT

  # –í–ü–ù –∏ –≤—Å—è–∫–∏–µ Anydesk, Rustdesk, Teamviewer –≤ –¥–∏—Ä–µ–∫—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å)
  - PROCESS-NAME-REGEX,(?i).*tailscale.*,DIRECT
  - PROCESS-NAME-REGEX,(?i).*wireguard.*,DIRECT
  - PROCESS-NAME-REGEX,(?i).*netbird.*,DIRECT
  - PROCESS-NAME-REGEX,(?i).*anydesk.*,DIRECT
  - PROCESS-NAME-REGEX,(?i).*rustdesk.*,DIRECT
  - PROCESS-NAME-REGEX,(?i).*teamviewer.*,DIRECT
  - RULE-SET,remote-control,DIRECT

  # –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–∫–ª–∞–º—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - RULE-SET,oisd_big,REJECT # –°–ø–∏—Å–∫–∏ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ Legiz
  # –ü—É—Å–∫–∞–µ–º —ç—Ç–∏ –¥–æ–º–µ–Ω—ã —Ç–≤–∏—á–∞ –≤ –¥–∏—Ä–µ–∫—Ç, —á—Ç–æ–±—ã –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç —Ä–µ–∫–ª–∞–º—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - OR,((DOMAIN-SUFFIX,ads.twitch.tv),(DOMAIN-SUFFIX,playlist.ttvnw.net)),DIRECT 
  # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–æ—Ä—Ä–µ–Ω—Ç—ã –≤ DIRECT (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - RULE-SET,torrent-clients,DIRECT
  - RULE-SET,torrent-trackers,DIRECT
  - PROCESS-NAME-REGEX,(?i).*torrent.*,DIRECT

  # –î–µ–ª–∞–µ–º REJECT QUIC (–¥–ª—è VLESS REALITY)
  - RULE-SET,quic,REJECT

  # –û–ø—Ä–µ–¥–µ–ª—è–ª–∫–∏ IP –ø—É—Å–∫–∞–µ–º –≤ –ø—Ä–æ–∫—Å–∏, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–µ–ª
  - OR,((DOMAIN,ipwho.is),(DOMAIN,api.ip.sb),(DOMAIN,ipapi.co),(DOMAIN,ipinfo.io),(DOMAIN-SUFFIX,2ip.io),(DOMAIN-SUFFIX,2ipcore.com)),üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã

  # -----

  # ‚ñ∂Ô∏è YouTube
  - RULE-SET,youtube,‚ñ∂Ô∏è YouTube
  - PROCESS-NAME-REGEX,(?i).*youtube.*,‚ñ∂Ô∏è YouTube

  # ‚û§ Telegram
  - RULE-SET,telegram-ips,‚û§ Telegram
  - RULE-SET,telegram-domains,‚û§ Telegram
  - PROCESS-NAME-REGEX,(?i).*ayugram.*,‚û§ Telegram
  - PROCESS-NAME-REGEX,(?i).*telegram.*,‚û§ Telegram

  # üí¨ Discord
  - AND,((RULE-SET,cloudflare-ips),(NETWORK,udp),(DST-PORT,19200-19500)),üí¨ Discord
  - AND,((RULE-SET,cloudflare-PentiumB),(NETWORK,udp),(DST-PORT,19200-19500)),üí¨ Discord
  - AND,((RULE-SET,discord_voiceips),(NETWORK,udp),(DST-PORT,50000-50100)),üí¨ Discord
  - RULE-SET,discord_vc,üí¨ Discord
  - RULE-SET,discord_domains,üí¨ Discord
  - PROCESS-NAME-REGEX,(?i).*discord.*,üí¨ Discord
  
  # üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã
  - RULE-SET,ru-inside,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã  # ITDog —Å–ø–∏—Å–∫–∏ –¥–æ–º–µ–Ω–æ–≤ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–∑ –†–§ - https://github.com/itdoginfo/allow-domains/blob/main/Russia/inside-raw.lst
  - RULE-SET,refilter_domains,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã # Re:Filter —Å–ø–∏—Å–∫–∏ –¥–æ–º–µ–Ω–æ–≤ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–∑ –†–§ - https://github.com/1andrevich/Re-filter-lists/blob/main/community.lst
  - RULE-SET,ru-inline-banned,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã # –î–æ–º–µ–Ω—ã –Ω–∞–±–∏—Ç—ã–µ –≤—Ä—É—á–Ω—É—é (—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—ã—à–µ)
  - RULE-SET,inline-blocked-ips,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã # IP –Ω–∞–±–∏—Ç—ã–µ –≤—Ä—É—á–Ω—É—é (—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—ã—à–µ)
  - RULE-SET,category-porn,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  - RULE-SET,ai,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã # –ù–µ–π—Ä–æ—Å–µ—Ç–∏
  - RULE-SET,google-deepmind,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã # Google Gemini –∏ AI Studio
  - RULE-SET,speedtest-net,üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∞–π—Ç—ã # speedtest.net 

  # üü† Cloudflare
  - RULE-SET,cloudflare-ips,üü† Cloudflare # –°–ø–∏—Å–æ–∫ ip MetaCubeX
  - RULE-SET,cloudflare-domains,üü† Cloudflare # –î–æ–º–µ–Ω—ã —Å–µ—Ä–≤–∏—Å–æ–≤ Cloudflare
  - RULE-SET,cloudflare-PentiumB,üü† Cloudflare # –°–ø–∏—Å–æ–∫ ip –æ—Ç PentiumB

  # ‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã
  - RULE-SET,ru-inline,‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã # –°–ø–∏—Å–∫–∏ –Ω–∞–±–∏—Ç—ã–µ –≤—Ä—É—á–Ω—É—é (—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—ã—à–µ)
  - RULE-SET,ru-outside,‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã # ITDog —Å–ø–∏—Å–∫–∏ –¥–æ–º–µ–Ω–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –†–§ - https://github.com/itdoginfo/allow-domains/blob/main/Russia/outside-raw.lst
  - RULE-SET,ru-apps,‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã # –°–ø–∏—Å–∫–∏ –†–£ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –æ—Ç Legiz
  - RULE-SET,yandex,‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã # –Ø–Ω–¥–µ–∫—Å
  - RULE-SET,mailru,‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã  # mail.ru
  - RULE-SET,drweb,‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã # DrWeb
  - RULE-SET,geosite-ru,‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã
  - RULE-SET,geoip-ru,‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã
  - RULE-SET,geoip-by,‚ö™üîµüî¥ RU —Å–∞–π—Ç—ã # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  
  # üéÆ –ò–≥—Ä—ã
  - PROCESS-NAME-REGEX,(?i).*steam.*,üéÆ –ò–≥—Ä—ã
  - PROCESS-NAME-REGEX,(?i).*dota2.*,üéÆ –ò–≥—Ä—ã
  - PROCESS-NAME-REGEX,(?i).*cs2.*,üéÆ –ò–≥—Ä—ã
  - PROCESS-NAME-REGEX,(?i).*epicgames.*,üéÆ –ò–≥—Ä—ã
  - PROCESS-NAME-REGEX,(?i).*origin.*,üéÆ –ò–≥—Ä—ã
  - PROCESS-NAME-REGEX,(?i).*battle.net.*,üéÆ –ò–≥—Ä—ã
  - PROCESS-NAME-REGEX,(?i).*uplay.*,üéÆ –ò–≥—Ä—ã
  
  # –¢–æ—Ä—Ä–µ–Ω—Ç—ã
  - RULE-SET,torrent-clients,üîó –¢–æ—Ä—Ä–µ–Ω—Ç—ã
  - RULE-SET,torrent-trackers,üîó –¢–æ—Ä—Ä–µ–Ω—Ç—ã
  - PROCESS-NAME-REGEX,(?i).*torrent.*,üîó –¢–æ—Ä—Ä–µ–Ω—Ç—ã

  # üåç –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∞–π—Ç—ã
  - MATCH,üåç –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∞–π—Ç—ã